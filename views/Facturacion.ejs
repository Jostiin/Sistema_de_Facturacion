<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Facturación</title>
    <link rel="stylesheet" href="<%=url%>/css/output.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="<%=url%>/js/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

</head>
<body>

    <nav class="fixed top-0 z-50 w-full bg-white border-b border-gray-200 ">
        <div class="px-3 py-3 lg:px-5 lg:pl-3">
        <div class="flex items-center justify-between">
            <div class="flex items-center justify-start rtl:justify-end">
            <button data-drawer-target="logo-sidebar" data-drawer-toggle="logo-sidebar" aria-controls="logo-sidebar" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 ">
                <span class="sr-only">Open sidebar</span>
                <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
                </svg>
            </button>
            <a href="https://flowbite.com" class="flex ms-2 md:me-24">
                <span class="self-center text-xl font-semibold sm:text-2xl whitespace-nowrap ">Sistema de Facturación</span>
            </a>
            </div>
            <div class="flex items-center">
                <div class="flex items-center ms-3">
                <div>
                    <button type="button" class="flex text-sm  rounded-full focus:ring-4 focus:ring-gray-300 " aria-expanded="false" data-dropdown-toggle="dropdown-user">
                    <span class="sr-only">Open user menu</span>
                    <img class="w-8 h-8 rounded-full" src="https://avatars.githubusercontent.com/u/63017264?v=4" alt="user photo">
                    </button>
                </div>
                <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded shadow " id="dropdown-user">
                    <div class="px-4 py-3" role="none">
                    <p class="text-sm text-gray-900 " role="none">
                        Neil Sims
                    </p>
                    <p class="text-sm font-medium text-gray-900 truncate " role="none">
                        neil.sims@flowbite.com
                    </p>
                    </div>
                    <ul class="py-1" role="none">
                    <li>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 " role="menuitem">Dashboard</a>
                    </li>
                    <li>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 " role="menuitem">Settings</a>
                    </li>
                    <li>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 " role="menuitem">Earnings</a>
                    </li>
                    <li>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 " role="menuitem">Sign out</a>
                    </li>
                    </ul>
                </div>
                </div>
            </div>
        </div>
        </div>
    </nav>
  
    <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform -translate-x-full bg-white border-r border-gray-200 sm:translate-x-0 " aria-label="Sidebar">
        <div class="h-full px-3 pb-4 overflow-y-auto bg-white ">
            <ul class="space-y-2 font-medium">
            <li>
                <a href="/Sistema-de-facturacion" class="flex items-center p-2 text-gray-900 rounded-lg group">
                    <svg class="w-6 h-6 text-gray-500 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M11.293 3.293a1 1 0 0 1 1.414 0l6 6 2 2a1 1 0 0 1-1.414 1.414L19 12.414V19a2 2 0 0 1-2 2h-3a1 1 0 0 1-1-1v-3h-2v3a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2v-6.586l-.293.293a1 1 0 0 1-1.414-1.414l2-2 6-6Z" clip-rule="evenodd"/>
                    </svg>                  
                    <span class="ms-3">Inicio</span>
                </a>
            </li>
            <li>
                <a href="/Sistema-de-facturacion/Facturacion" class="flex items-center p-2 text-gray-900 rounded-lg group">
                    <svg class="w-6 h-6 text-gray-500 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M8 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1h2a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2Zm6 1h-4v2H9a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2h-1V4Zm-6 8a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H9Z" clip-rule="evenodd"/>
                    </svg>                      
                    <span class="flex-1 ms-3 whitespace-nowrap">Facturar</span>
                    
                </a>
            </li>
            <li>
                <a href="/Sistema-de-facturacion/Productos" class="flex items-center p-2 text-gray-900 rounded-lg group">
                    <svg class="w-6 h-6 text-gray-500 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M4.857 3A1.857 1.857 0 0 0 3 4.857v4.286C3 10.169 3.831 11 4.857 11h4.286A1.857 1.857 0 0 0 11 9.143V4.857A1.857 1.857 0 0 0 9.143 3H4.857Zm10 0A1.857 1.857 0 0 0 13 4.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 21 9.143V4.857A1.857 1.857 0 0 0 19.143 3h-4.286Zm-10 10A1.857 1.857 0 0 0 3 14.857v4.286C3 20.169 3.831 21 4.857 21h4.286A1.857 1.857 0 0 0 11 19.143v-4.286A1.857 1.857 0 0 0 9.143 13H4.857Zm10 0A1.857 1.857 0 0 0 13 14.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 21 19.143v-4.286A1.857 1.857 0 0 0 19.143 13h-4.286Z" clip-rule="evenodd"/>
                    </svg>
                       
                    <span class="flex-1 ms-3 whitespace-nowrap">Productos</span>
                    
                </a>
            </li>
            <li>
                <a href="/Sistema-de-facturacion/Proveedores" class="flex items-center p-2 text-gray-900 rounded-lg group">
                    <svg class="w-6 h-6 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path fill-rule="evenodd" d="M4 4a2 2 0 0 0-2 2v9a1 1 0 0 0 1 1h.535a3.5 3.5 0 1 0 6.93 0h3.07a3.5 3.5 0 1 0 6.93 0H21a1 1 0 0 0 1-1v-4a.999.999 0 0 0-.106-.447l-2-4A1 1 0 0 0 19 6h-5a2 2 0 0 0-2-2H4Zm14.192 11.59.016.02a1.5 1.5 0 1 1-.016-.021Zm-10 0 .016.02a1.5 1.5 0 1 1-.016-.021Zm5.806-5.572v-2.02h4.396l1 2.02h-5.396Z" clip-rule="evenodd"/>
                    </svg>
                      
                    <span class="flex-1 ms-3 whitespace-nowrap">Proveedores</span>
                </a>
            </li>
            <!--
            <li>
                <a href="/Sistema-de-facturacion/clientes" class="flex items-center p-2 text-gray-900 rounded-lg group">
                    <svg class="w-6 h-6 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4H6Zm7.25-2.095c.478-.86.75-1.85.75-2.905a5.973 5.973 0 0 0-.75-2.906 4 4 0 1 1 0 5.811ZM15.466 20c.34-.588.535-1.271.535-2v-1a5.978 5.978 0 0 0-1.528-4H18a4 4 0 0 1 4 4v1a2 2 0 0 1-2 2h-4.535Z" clip-rule="evenodd"/>
                    </svg>
                      
                    <span class="flex-1 ms-3 whitespace-nowrap">Clientes</span>
                </a>
            </li>
            -->
            <li>
                <a href="/Sistema-de-facturacion/signin" class="flex items-center p-2 text-gray-900 rounded-lg group">
                    <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 16">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3"/>
                    </svg>
                    <span class="flex-1 ms-3 whitespace-nowrap">Sign In</span>
                </a>
            </li>
            
            </ul>
        </div>
    </aside>
  
    <div class="p-4 sm:ml-64">
        <div class="p-4 mt-14">
            <h1 class="flex items-center text-2xl font-extrabold ">Sistema de Facturación<span class="bg-blue-100 text-blue-800 text-sm font-semibold me-2 px-2.5 py-0.5 rounded  ms-2">Facturación</span></h1>

            <small class="ms-2 font-semibold text-gray-500 ">Agiliza tu facturación.</small>
            
            <div class="flex flex-col gap-5 pt-5">
                <div class="flex justify-start gap-2">
                    <button id="DownloadPdf" class="relative inline-flex items-center justify-center p-0.5 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500 group-hover:to-blue-500 hover:text-white  focus:ring-4 focus:outline-none focus:ring-cyan-200 ">
                        <span class="flex gap-2 justify-center items-center relative px-4 py-2 transition-all ease-in duration-75 bg-white rounded-md group-hover:bg-opacity-0">
                            <svg class="w-4 h-4 text-gray-800 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 15v2a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-2m-8 1V4m0 12-4-4m4 4 4-4"/>
                            </svg>
                              
                            <span  class="text-[10px]">Descargar</span>
                        </span>
                    </button>
                </div>
                <form class="flex gap-2  w-full justify-start flex-col" id="AddVendorFactura">
                    <div class="flex justify-center items-center  w-full">
                        <input type="text" id="input_client" placeholder="Nombre del cliente" class="rounded-s-lg shadow-md block p-3 w-full z-20 text-sm text-gray-900 bg-gray-50  focus:ring-blue-500 focus:border-blue-500">
                        <input type="text" id="input_phone" placeholder="Teléfono" class=" shadow-md block p-3 w-full z-20 text-sm text-gray-900 bg-gray-50  focus:ring-blue-500 focus:border-blue-500 ">
                        <input type="text" id="input_ci_ruc" placeholder="Ruc/Ci" class=" shadow-md block p-3 w-full z-20 text-sm text-gray-900 bg-gray-50  focus:ring-blue-500 focus:border-blue-500 ">
                        <input type="email" id="input_mail" placeholder="Email" class=" shadow-md block p-3 w-full z-20 text-sm text-gray-900 bg-gray-50  focus:ring-blue-500 focus:border-blue-500">
                        <input type="text" id="input_direction" placeholder="Dirección" class=" shadow-md block p-3 w-full z-20 text-sm text-gray-900 bg-gray-50  focus:ring-blue-500 focus:border-blue-500">
                    
                    </div>
                    
                </form>
                <form id="AddProductFactura">
                    <div class="flex relative w-full">
                        <input type="number" id="amount"  class=" shadow-md block p-2 w-full z-20 text-sm text-gray-900 bg-gray-50  focus:ring-blue-500 focus:border-blue-500 rounded-s-lg" placeholder="Cantidad" required />
                        <input type="search" id="codigo" class=" shadow-md   block p-2 w-full z-20 text-sm text-gray-900 bg-gray-50  focus:ring-blue-500 focus:border-blue-500" placeholder="# Código" required />
                        <button type="submit" class="p-2 shadow-md text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300  ">
                            <span class="text-sm">Agregar</span>
                        </button>
                    </div>
                </form>
                <div id="TableFactura" class="relative overflow-x-auto shadow-md sm:rounded-lg">
                    <table class="w-full text-sm text-left rtl:text-right text-gray-500 " >
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50 ">
                            <tr>
                                <th scope="col" class="px-6 py-3">
                                    CONCEPTO
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    CANTIDAD
                                </th>
                               
                                <th scope="col" class="px-6 py-3">
                                    PRECIO 
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    TOTAL
                                </th>
                            </tr>
                        </thead>
                        <tbody id="miTbody">
                            
                        </tbody>
                        <tbody>
                            
                            <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                                
                                <td class="px-6 py-4">
                                  
                                </td>
                                <td class="px-6 py-4">
                                  
                                </td>
                                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                                    SubTotal
                                </th>
                                <td class="px-6 py-4" id="valueSubtotal_">
                                    $0
                                </td>
                            </tr>
                            <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                                
                                <td class="px-6 py-4">
                                  
                                </td>
                                <td class="px-6 py-4">
                                  
                                </td>
                                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                                    Descuento
                                </th>
                                <td class="px-6 py-4">
                                    <select id="valueDescuentos" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                        <option selected value="0">0%</option>
                                        <option value="1">1%</option>
                                        <option value="2">2%</option>
                                        <option value="3">3%</option>
                                        <option value="4">4%</option>
                                      </select>
                                </td>
                            </tr>
                            <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                                
                                <td class="px-6 py-4">
                                  
                                </td>
                                <td class="px-6 py-4">
                                  
                                </td>
                                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                                    IVA 15%
                                </th>
                                <td class="px-6 py-4" id="valorIva_">
                                    $0
                                </td>
                            </tr>
                            <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                               
                                <td class="px-6 py-4">
                                  
                                </td>
                                <td class="px-6 py-4">
                                  
                                </td>
                                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                                    Total a pagar
                                </th>
                                <td class="px-6 py-4" id="valueTotal_">
                                    $0
                                </td>
                            </tr>
                            
                        </tbody>
                        
                    </table>
                </div>
            </div>
            
        </div>

    </div>

    <div id="ejs-template" style="display: none;">
        <div class="flex flex-col gap-5 text-[12px]"  style="margin: 3cap;">
            <div class="flex gap-10">
                <div class="flex-1">
                    <div class="flex justify-center">
                        <img class="w-40 p-3" src="<%=url%>/img/LogoPintulam.jpeg" alt="">
                    </div>
                    <div class="p-5" style="background-color: #014f86; border-radius: 2rem;">
                        <span class="font-bold">PINTUM.S.A</span>
                        <p class="font-bold">Dirrecion: AV.LA PRENSA E 13-131</p>
                        <p class="font-bold">Email: pintum.s.a_@gmail.com</p>
                        <span class="font-bold">Sociedad</span> <br>
                        <small>OBLIGADO A LLEVAR CONTABILIDAD: SI</small>
                    </div>
                </div> 
                <div class="flex-1 p-5 flex flex-col justify-center" style="background-color: #adb5bd; border-radius: 2rem;">
                    <span >R.U.C: 1719394486001</span>
                    <span class="font-bold">FACTURA</span>
                    <p class="font-bold">No. 003-002-000026924</p>
                    <small>NUMERO DE AUTORIZACIÓN</small>
                    <p>0102420111134345567000034323423402000003442040000</p>
                    <span class="font-bold">AMBIENTE: PRODUCCIÓN</span>
                    <span class="font-bold">EMISIÓN: NORMAL</span>
                    <span>CLAVE DE ACCESO</span>
                    <p>0102420111134345567000034323423402000003442040000</p>
                </div>
            </div>
            <div class="flex flex-col p-5 " style="background-color: #a2d2ff; border-radius: 2rem;">
                <div>
                    <span>Razon Social/Nombres y Apellidos: </span><span id="spanNames"></span>
                </div>
                <div>
                    <span>Identificación: </span><span id="spanIdentificacion"></span>
                </div>
                <div class="flex gap-40">
                    <div class="flex flex-col ">
                        <div>
                            <span>Dirección: </span><span id="spanDirection"></span>
                        </div>
                        <div>
                            <span>Teléfono: </span><span id="spanPhone"></span>
                        </div>
                        
                    </div>
                    <div class="flex flex-col">
                        <div>
                            <span>Mail: </span><span id="spanMail"></span>
                        </div>
                        <div>
                            <span>Fecha de Emisión: </span><span id="spanDate"></span>
                        </div>
                        
                    </div>
                </div>
            </div>
            <table class="w-full text-[12px] text-left rtl:text-right text-gray-500 " >
                <thead class=" text-gray-700 uppercase bg-gray-50 ">
                    <tr>
                        <th scope="col" class="px-6 py-3" style="background-color: #014f86; color: white;">
                            CONCEPTO
                        </th>
                        <th scope="col" class="px-6 py-3" style="background-color: #014f86; color: white;">
                            CANTIDAD
                        </th>
                       
                        <th scope="col" class="px-6 py-3" style="background-color: #014f86; color: white;">
                            PRECIO 
                        </th>
                        <th scope="col" class="px-6 py-3" style="background-color: #014f86; color: white;">
                            TOTAL
                        </th>
                    </tr>
                </thead>
                <tbody id="miTbody2">
                    
                </tbody>
                <tbody>
                    
                    <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                        
                        <td class="px-6 py-4">
                          
                        </td>
                        <td class="px-6 py-4">
                          
                        </td>
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                            SubTotal
                        </th>
                        <td class="px-6 py-4" id="valueSubtotal_2">
                            $0
                        </td>
                    </tr>
                    <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                        
                        <td class="px-6 py-4">
                          
                        </td>
                        <td class="px-6 py-4">
                          
                        </td>
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                            Descuento
                        </th>
                        <td class="px-6 py-4" id="valorDescuento_2">
                            0%
                        </td>
                    </tr>
                    <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                        
                        <td class="px-6 py-4">
                          
                        </td>
                        <td class="px-6 py-4">
                          
                        </td>
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                            IVA 15%
                        </th>
                        <td class="px-6 py-4" id="valorIva_2">
                            $0
                        </td>
                    </tr>
                    <tr class="odd:bg-white  even:bg-gray-50  border-b ">
                       
                        <td class="px-6 py-4">
                          
                        </td>
                        <td class="px-6 py-4">
                          
                        </td>
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap ">
                            Total a pagar
                        </th>
                        <td class="px-6 py-4" id="valueTotal_2">
                            $0
                        </td>
                    </tr>
                    
                </tbody>
                
            </table>
            <div class="flex flex-col p-5" style="background-color: #adb5bd; border-radius: 2rem;">
                <span>Forma de pago: Transferencia</span>
                <span>Nota: El servicio tiene una validez de 30 dias.</span>
            </div>
            <div class="p-5"  style="background-color: #a2d2ff; border-radius: 2rem;">
                <p>
                    Favor emitir y enviar retenciones dentro de los 5 dias de emitida la factura según 
                    lo dispuesto  en el ART.59 ley del regimen tributario interno , caso contrario debera
                    cancelar el valor total de la factura.
                </p>
            </div>
        </div>
    </div>
</body>
</html>

<script>
    let SubtotalValue = 0;
    $(document).ready(function () {
        $('#AddProductFactura').submit(function (e) { 
            e.preventDefault();
            
            var productData = {
                code: $("#codigo").val(),
                cantidad: $("#amount").val(),
            };
            

            $.ajax({
                type: "POST",
                url: "/Sistema-de-facturacion/AddFactura",
                data: productData,
                dataType: "json",
                success: function (response) {
                    var tabla = $('#miTbody'); 
                    var fila = `<tr><td scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap " >${response.descripcion}</td><td class="px-6 py-4">${response.cantidad}</td><td class="px-6 py-4">$${(response.precio).toFixed(2)}</td><td class="px-6 py-4">$${(response.precio*response.cantidad).toFixed(2)}</td></tr>`
                    tabla.append(fila); 
                    $("#codigo").val("")
                    $("#amount").val("")
                    //SUBTOTAL
                    SubtotalValue += response.precio*response.cantidad; 
                    $("#valueSubtotal_").text(`$${SubtotalValue.toFixed(2)}`);
                    //IVA
                    $("#valorIva_").text(`$${(SubtotalValue*0.15).toFixed(2)}`);
                    //TOTAL A PAGAR
                    let selectDescuento = $('#valueDescuentos').val();
                    let descuento = SubtotalValue*(parseInt(selectDescuento)/100)
                    let Iva = ((SubtotalValue-descuento)*(15/100)).toFixed(3)
                    $("#valueTotal_").text(`$${(parseFloat(SubtotalValue-descuento)+parseFloat(Iva)).toFixed(2)}`);
                    
                    //---------------------------------------------------------------------------------------
                    //TABLA FACTURA
                    var tabla2 = $('#miTbody2'); 
                    var fila2 = `<tr><td scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap " >${response.descripcion}</td><td class="px-6 py-4">${response.cantidad}</td><td class="px-6 py-4">$${(response.precio).toFixed(2)}</td><td class="px-6 py-4">$${(response.precio*response.cantidad).toFixed(2)}</td></tr>`
                    tabla2.append(fila2); 
                    //Nombres
                    $("#spanNames").text(`${$('#input_client').val()}`);
                    //Identificacion
                    $("#spanIdentificacion").text(`${$('#input_ci_ruc').val()}`);
                    //Dirrecion
                    $("#spanDirection").text(`${$('#input_direction').val()}`);
                    //Telefono
                    $("#spanPhone").text(`${$('#input_phone').val()}`);
                    //Mail input_ci_ruc
                    $("#spanMail").text(`${$('#input_mail').val()}`);
                    //Fecha de emision
                    const fechaActual = new Date();
                    const dia = fechaActual.getDate();
                    const mes = fechaActual.getMonth() + 1; // Se agrega 1 ya que los meses van de 0 a 11 en JavaScript
                    const anio = fechaActual.getFullYear();
                    // Formatear la fecha
                    const fechaFormateada = `${dia.toString().padStart(2, '0')}/${mes.toString().padStart(2, '0')}/${anio}`;
                    $("#spanDate").text(`${fechaFormateada}`);
                    //SUBTOTAL
                    $("#valueSubtotal_2").text(`$${SubtotalValue.toFixed(2)}`);
                    //DESCUENTO
                    $("#valorDescuento_2").text(`${$('#valueDescuentos').val()}%`);
                    //IVA
                    $("#valorIva_2").text(`$${(SubtotalValue*0.15).toFixed(2)}`);
                    //TOTAL A PAGAR
                    $("#valueTotal_2").text(`$${(parseFloat(SubtotalValue-descuento)+parseFloat(Iva)).toFixed(2)}`);
                    
                }

            });
            
        });
        $('#DownloadPdf').click(function (e) { 
            e.preventDefault();
            generatePDF() 
        });
        function generatePDF() {
            const ejsTemplate = document.getElementById('ejs-template').innerHTML;
            html2pdf().from(ejsTemplate).save('Factura.pdf');
        }
    });
</script>

